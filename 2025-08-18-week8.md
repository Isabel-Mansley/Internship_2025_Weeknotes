# Week 8 - 18th August 2025

As I am approaching the end of my internship, I thought it was a good idea to start clearing up my workflow, so I spent the start of my week refactoring my code and extracting important files to put them all into one folder that is easy to read, use, and understand.

After a few discussions surrounding UNET, we came to the conclusion that it wouldn’t be a realistic or practical goal for my last few days because I would need to create lots of new training data with labelled tiles instead of the labelled points that I am currently using. Whilst this is a shame to not be able to try to improve the core problem of lots of out of place pixels I instead decided to try and make the smoothing more advanced by looking at the confidence of all the classes and taking into account the second, third etc most confident classes in addition to the pixels surrounding them.

In the advanced smoothing algorithm, if the confidence is low enough it takes the confidence of the top 2 classes and if the difference is small (meaning it is unsure about which class it is), it compares the surrounding pixels to the top 3 classes and if the surrounding classes agree with one of the top 3 confidences then it smooths the pixel. The downside to this more complex algorithm is that it took a long time to smooth the whole map so a less intensive method might be needed for larger areas such as New Zealand.
A smoothing below 0.2 is shown below:

![A colour map showing the results of the advanced smoothing result](/images/week8/advanced_smoothing_0.2.png)

In addition to this I ran a kfold analysis of the model to see how accurate it was - once again giving an accuracy of around 67%.

Looking at my initial map of New Zealand it had a lot less interference on it than the Cairngorms, in general it just seemed a lot more confident on which class an area was. A strong reason for this could be that New Zealand had over 2000 training points, whereas the Cairngorms only had 290 and so potentially this added training data helped to cover areas that were more ambiguous to the class. As a result, I thought I should try and generate some more training data for the Cairngorms to see if I could improve the classification at all. In particular, one area I was interested in improving was the model’s confusion between roads and rivers. I downloaded all of the rivers and roads off Open Street Map and generated 100 random points in each layer, then manually verified the points before rerunning the TESSERA classifier.

This yielded a map that was far more certain of rivers, but overclassified water and urban areas greatly.

Before:

![A colour map showing the map before adding lots of river and road training points](/images/week8/pre_river_and_road_map.png)

After:

![A colour map showing the results of adding lots of river and road training points](/images/week8/river_and_road_map.png)

This could have been because some of the roads that I approved were more trail-esque, and thus to the model looked like the surrounding habitat leading to this confusion. Overall it is a worse depiction of the Cairngorms so if I wanted to improve the classification this way I would need more training points for all classes instead of just two. Some classes, like heath, I could load layers from Open Street Map and do this again with, but other classes like bog are not as easy layers to find so some more field data points are probably necessary (not to mention that field data is usually higher quality training points than randomly generated ones) to improve the map further in this way.

Looking at how many training points there are for each Cairngorms class (pre additional river and road points) there are some classes that probably need more points: bog_restored (6), alpine_heath (6), alpine (8), semi_natural_grassland (7).

Heath is the class that has the most number of points, which could explain why heathland is often overpredicted.

How many training points there are for each Cairngorms class:

| Class | Number of points |
| --- | --- |
| bog_natural | 20 |
| bog_degraded | 11 |
| bog_restored | 6 |
| pine_mt | 11 |
| heath | 60 |
| pine_og | 10 |
| alpine_heath | 6 |
| broadleaved | 11 |
| alpine | 8 |
| improved_grassland | 22 |
| clearfell | 36 |
| semi_natural_grassland | 7 |
| water | 22 |
| urban | 33 |
| scree | 11 |
| shingle | 16 |

Finally, at the end of the week I started my writeup of the project, which was a nice opportunity to reflect on how much work I have achieved.
